{% extends 'posts/base.html' %}

{% block title %}All Posts - VDW Blog{% endblock %}

{% block content %}
<div class="post-list">
    {% for post in posts %}
    <article class="post">
        <h2><a href="{% url 'post_detail' post.slug %}">{{ post.title }}</a></h2>
        <div class="post-meta">
            Published on {{ post.created_date|date:"F d, Y" }}
            {% if post.modified_date != post.created_date %}
                • Updated {{ post.modified_date|date:"F d, Y" }}
            {% endif %}
        </div>
        
        {% if post.meta_description %}
        <p>{{ post.meta_description }}</p>
        {% else %}
        <div class="markdown-content">
            {{ post.content_text|truncatewords:50 }}...
        </div>
        {% endif %}
        
        {% if post.tags.all %}
        <div class="tags">
            {% for tag in post.tags.all %}
            <a href="#" class="tag">{{ tag.name }}</a>
            {% endfor %}
        </div>
        {% endif %}
    </article>
    {% empty %}
    <p>No published posts yet.</p>
    {% endfor %}
</div>

<!-- Pagination controls -->
{% if posts.has_other_pages %}
<div class="pagination" style="text-align: center; margin-top: 3em; padding-top: 2em; border-top: 1px solid #eee;">
    <span class="page-links">
        {% if posts.has_previous %}
            <a href="?page=1" style="margin: 0 5px;">« First</a>
            <a href="?page={{ posts.previous_page_number }}" style="margin: 0 5px;">‹ Previous</a>
        {% endif %}
        
        <span style="margin: 0 10px;">
            Page {{ posts.number }} of {{ posts.paginator.num_pages }}
        </span>
        
        {% if posts.has_next %}
            <a href="?page={{ posts.next_page_number }}" style="margin: 0 5px;">Next ›</a>
            <a href="?page={{ posts.paginator.num_pages }}" style="margin: 0 5px;">Last »</a>
        {% endif %}
    </span>
    <div style="margin-top: 10px; color: #666; font-size: 0.9em;">
        Total posts: {{ posts.paginator.count }}
    </div>
</div>
{% endif %}
{% endblock %}